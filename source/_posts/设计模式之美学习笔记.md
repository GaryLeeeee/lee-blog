---
title: 设计模式之美学习笔记
date: 2021-11-13 22:41:45
tags: [设计模式]
categories: [设计模式,设计模式之美]
---


# 设计原则与思想：面向对象
## 理论一：面向对象
概念：面向对象编程是一种编程范式或编程风格，它以类或对象作为组织代码的基本单元
特性：封装、抽象、继承、多态
区别：**面向对象分析**就是要搞清楚做什么，**面向对象设计**就是要搞清楚怎么做，**面向对象编程**就是将**分析**和**设计**的结果翻译成代码的过程

## 理论二：封装、抽象、继承、多态
* **封装**
    * **What**：隐藏信息，保护数据访问(如private)
    * **How**：暴露有限接口和属性，需要编程语音提供访问控制的语法(如Jva提供private/protected/public等)
    * **Why**：提高代码可维护性，降低接口复杂度，提高类的易用性
    * **白话总结**：可通过暴露出来的方法来访问数据(如public)，而屏蔽其不可修改的属性(如private)
* **抽象**
    * **What**：隐藏具体实现，使用者只需关心功能，无需关心实现
    * **How**：通过接口类(interface)或者抽象类(abstract)实现，特殊语法机制非必需
    * **Why**：提高代码的扩展性、维护性，降低复杂度，减少细节负担
    * **白话总结**：使用者只需关心功能，无需关心实现
* **继承**
    * **What**：表示`is-a`关系(指的是类的父子继承关系)，分为单继承(如Java)和多继承(如C++)
    * **How**：需要编程语言提供特殊语法机制(如Java的`extend`，C++的`:`)
    * **Why**：解决代码复用问题
    * **白话总结**：比如Cat继承自Animal，父类(Animal)有动物的共同特性(如吃饭睡觉)，子类(Cat)可有单独的特性(如卖萌)
* **多态**
    * **What**：子类替换父类，在运行时调用子类的实现
    * **How**：需要编程语言提供特殊语法技术(如支持继承、支持父类引用子类、支持子类重写父类方法等)
    * **Why**：提高代码扩展性和复用性
    * **白话总结**：如`Animal animal = new Cat();`，调用animal的方法反映的是Cat的特性
  ```java
  public class Animal {
  private String name;
  public String getName(){return this.name;}
  public void setName(String name){this.name = name;}
  //叫声
  public String shout(){return "default";}
  }
  
  public class Cat extends Animal{
  @Override
  public String getName() {
    //不同子类会有自己的name(多态)
    return "猫";
  }
  @Override 
  public String shout() {
    //不同子类会有自己的叫声(多态)
    return "喵";
    }
   }
   ```
  
## 理论三：面向对象相比面向过程有哪些优势？
* 概念
  * `面向对象编程`以类为组织代码的基本单元
  * `面向过程编程`以过程/方法作为租住代码的基本单元
* `面向对象编程`比起`面向过程编程`的优势
  * 更能应对复杂类型的程序开发(对于大规模复杂程序的开发，程序的处理流程并非单一的一条主线，而是错综复杂的网状结果)
  * 编写的代码更加易扩展、易复用、易维护(具有丰富的特性如封装、抽象、继承、多态)
  * 更加人性化、更加高级、更加智能(从编程语言与机器打交道的方式演进规律总结)

* 代码区别例子
  * `面向过程编程`(如C语言)
```
struct User {
  char name[64];
  int age;
  char gender[16];
};

struct User parse_to_user(char* text) {
  // 将text(“小王&28&男”)解析成结构体struct User
}

char* format_to_text(struct User user) {
  // 将结构体struct User格式化成文本（"小王\t28\t男"）
}

void sort_users_by_age(struct User users[]) {
  // 按照年龄从小到大排序users
}

void format_user_file(char* origin_file_path, char* new_file_path) {
  // open files...
  struct User users[1024]; // 假设最大1024个用户
  int count = 0;
  while(1) { // read until the file is empty
    struct User user = parse_to_user(line);
    users[count++] = user;
  }
  
  sort_users_by_age(users);
  
  for (int i = 0; i < count; ++i) {
    char* formatted_user_text = format_to_text(users[i]);
    // write to new file...
  }
  // close files...
}

int main(char** args, int argv) {
  format_user_file("/home/zheng/user.txt", "/home/zheng/formatted_users.txt");
}
```
  * `面向对象编程`(Java语言)
```java

 public class User {
  private String name;
  private int age;
  private String gender;
  
  public User(String name, int age, String gender) {
    this.name = name;
    this.age = age;
    this.gender = gender;
  }
  
  public static User praseFrom(String userInfoText) {
    // 将text(“小王&28&男”)解析成类User
  }
  
  public String formatToText() {
    // 将类User格式化成文本（"小王\t28\t男"）
  }
}

public class UserFileFormatter {
  public void format(String userFile, String formattedUserFile) {
    // Open files...
    List users = new ArrayList<>();
    while (1) { // read until file is empty 
      // read from file into userText...
      User user = User.parseFrom(userText);
      users.add(user);
    }
    // sort users by age...
    for (int i = 0; i < users.size(); ++i) {
      String formattedUserText = user.formatToText();
      // write to new file...
    }
    // close files...
  }
}

public class MainApplication {
  public static void main(String[] args) {
    UserFileFormatter userFileFormatter = new UserFileFormatter();
    userFileFormatter.format("/home/zheng/users.txt", "/home/zheng/formatted_users.txt");
  }
}
```














