---
title: 设计原则与思想：设计原则
date: 2021-11-26 21:55:21
tags: [设计模式]
categories: [设计模式,设计模式之美,设计原则,设计原则与思想]
---

# 设计原则与思想：设计原则
## 理论一：单一职责原则
* **1.如何理解单一职责原则？**
    * **What**：一个类只负责完成一个职责或者功能
    * **How**：不要设计大而全的类->要设计粒度小、功能单一的类
    * **Why**：实现代码高内聚、低耦合，提高代码的复用性、可读性、可维护性
    
* **2.如何判断类的职责是否足够单一？**
不同场景的判断标准不同，下面这些情况就有可能说明这类的设计不满足单一职责原则(不是绝对的)：
    * 类中代码行数过多、函数或者属性过多
    * 类依赖或被依赖的其他类的过多
    * 私有(`private`)方法过多->考虑抽取私有方法到新的类中并设置为public方法
    * 类难命名(如只能命名为一些笼统的词语如Manager、Context等)
    * 类大量方法都是集中操作类中的某几个属性(如用户信息UserInfo表中大部分在操作地址address信息则可以考虑抽出来)
```java
public class UserInfo {
    //用户基础信息
    private long uid;//用户唯一id
    private String username;//用户昵称
    private int age;//用户年龄
    private Date createTime;//用户注册时间
    private Date lastLoginTime;//用户最后登陆时间
    private String avatarUrl;//用户头像
    
    //地址相关信息
    private String provinceOfAddress;//省
    private String cityOfAdddress;//市
    private String regionOfAddress;//区
    private String detailedAddress;//详细地址
}
```

* **3.类的职责是否设计得越单一越好？**
如果拆分得过细，实际上会适得其反，反倒会降低内聚性，也会影响代码的可维护性
  
## 理论二：开闭原则(对扩展开放、修改关闭)
* **1.如何理解"对扩展开放、修改关闭"？**
添加一个新的功能，
应该是通过在已有代码基础上扩展代码(新增模块、类、方法、属性等)， //`对扩展开发`
而非修改已有代码(修改模块、类、方法、属性)                   //`对修改关闭`

* **2.如何做到"对扩展开发、修改关闭"？**
  * 时刻具备扩展意识、抽象意识、封装意识
  * 写代码时候思考未来可能有哪些需求变更
  * 思考如何设计代码结构，事先留好扩展点
  * 保证在未来需求变更的时候，在不改动代码整体结构、做到最小代码改动的情况下，插入新的代码

* **3.常见的提高代码扩展性的方法**
  * 多态
  * 依赖注入(DI)
  * 基础接口而非实现编程
  * 大部分的设计模式(如装饰、策略、模板、责任连、状态)